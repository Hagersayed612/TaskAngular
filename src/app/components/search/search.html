<div class="search-section">
  <div class="container">
    <!-- Search Bar with Gradient -->
    <div class="search-box-wrapper">
      <div class="search-box">
        <div class="search-icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </div>
        <input
          type="text"
          class="search-input"
          placeholder="Search cities worldwide..."
          [(ngModel)]="searchTerm"
          (input)="onSearch()"
        />
        <button class="clear-btn" *ngIf="searchTerm" (click)="clearSearch()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="15" y1="9" x2="9" y2="15"></line>
            <line x1="9" y1="9" x2="15" y2="15"></line>
          </svg>
        </button>
      </div>
    </div>

    <!-- Date Filter Section -->
    <div class="date-filter-container">
      <div class="filter-header">
        <div class="header-content">
          <div class="calendar-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
          </div>
          <span class="filter-title">Select Date Range</span>
        </div>
        <button class="reset-btn" *ngIf="selectedDateFilter !== 'all'" (click)="resetFilters()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M8 16H3v5"></path>
          </svg>
          Reset
        </button>
      </div>

      <!-- Quick Filters Pills -->
      <div class="quick-filters">
        <button 
          class="filter-pill"
          [class.active]="selectedDateFilter === 'all'"
          (click)="selectDateFilter('all')"
        >
          <span class="pill-icon">üåç</span>
          <span class="pill-text">All Days</span>
        </button>

        <button 
          class="filter-pill"
          [class.active]="selectedDateFilter === 'today'"
          (click)="selectDateFilter('today')"
        >
          <span class="pill-icon">‚òÄÔ∏è</span>
          <span class="pill-text">Today</span>
        </button>

        <button 
          class="filter-pill"
          [class.active]="selectedDateFilter === 'tomorrow'"
          (click)="selectDateFilter('tomorrow')"
        >
          <span class="pill-icon">üå§Ô∏è</span>
          <span class="pill-text">Tomorrow</span>
        </button>

        <button 
          class="filter-pill"
          [class.active]="selectedDateFilter === 'week'"
          (click)="selectDateFilter('week')"
        >
          <span class="pill-icon">üìÖ</span>
          <span class="pill-text">This Week</span>
        </button>

        <button 
          class="filter-pill custom"
          [class.active]="selectedDateFilter === 'custom'"
          (click)="toggleCustomDate()"
        >
          <span class="pill-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="1"></circle>
              <circle cx="19" cy="12" r="1"></circle>
              <circle cx="5" cy="12" r="1"></circle>
            </svg>
          </span>
          <span class="pill-text">Custom</span>
        </button>
      </div>

      <!-- Custom Date Picker (Animated) -->
      <div class="custom-date-container" [@slideIn] *ngIf="showCustomDate">
        <div class="date-picker-card">
          <label class="date-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            Choose a specific date
          </label>
          <input
            type="date"
            class="custom-date-input"
            [(ngModel)]="selectedDate"
            (change)="onDateChange()"
          />
        </div>
      </div>

      <!-- Selected Date Display -->
      <div class="selected-info" *ngIf="selectedDate && selectedDateFilter !== 'all'">
        <div class="info-badge">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Showing forecast for: <strong>{{ formatSelectedDate() }}</strong>
        </div>
      </div>
    </div>
  </div>
</div>